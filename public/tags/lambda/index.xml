<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" 
  xmlns:content="http://purl.org/rss/1.0/modules/content/" 
  xmlns:dc="http://purl.org/dc/elements/1.1/" 
  xmlns:atom="http://www.w3.org/2005/Atom" 
  xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" 
  xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>Lambda on SREè¿ç»´åšå®¢</title>
    <link>http://localhost:1313/tags/lambda/</link>
    <description>Recent content in Lambda on SREè¿ç»´åšå®¢</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 06 May 2023 14:25:09 +0800</lastBuildDate>
    <sy:updatePeriod>daily</sy:updatePeriod>
    <sy:updateFrequency>daily</sy:updateFrequency>
    
        <atom:link href="http://localhost:1313/tags/lambda/index.xml" rel="self" type="application/rss+xml" />
    
    
    

      
      <item>
        <title>å¦‚ä½•ä½¿ç”¨ Lambda è‡ªåŠ¨æ·»åŠ CloudWatchæ‰€æœ‰å®ä¾‹ç£ç›˜å‘Šè­¦åŠ SNS é€šçŸ¥</title>
        <link>http://localhost:1313/posts/230506425079/</link>
        <pubDate>Sat, 06 May 2023 14:25:09 +0800</pubDate>
        
        <atom:modified>Fri, 30 Aug 2024 18:16:52 +0800</atom:modified>
        <guid>http://localhost:1313/posts/230506425079/</guid>
        <description>ä½œè€…ï¼šSREè¿ç»´åšå®¢ åšå®¢åœ°å€ï¼šhttps://www.cnsre.cn/ æ–‡ç« åœ°å€ï¼šhttps://www.cnsre.cn/posts/23</description>
        <content:encoded>&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;SREè¿ç»´åšå®¢&lt;/a&gt;&lt;br /&gt;
åšå®¢åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;https://www.cnsre.cn/&lt;/a&gt;&lt;br /&gt;
æ–‡ç« åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/posts/230506425079/&#34;&gt;https://www.cnsre.cn/posts/230506425079/&lt;/a&gt;&lt;br /&gt;
ç›¸å…³è¯é¢˜ï¼š&lt;a href=&#34;https://www.cnsre.cn/tags/lambda/&#34;&gt;https://www.cnsre.cn/tags/lambda/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h1 id=&#34;åˆ©ç”¨lambdaè½»æ¾å®ç°ec2å®ä¾‹ç›‘æ§&#34;&gt;åˆ©ç”¨Lambdaè½»æ¾å®ç°EC2å®ä¾‹ç›‘æ§&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘æ–°å¢äº†ä¸€äº›æœåŠ¡å™¨ï¼Œå› ä¸ºæ¯ä¸ªæœåŠ¡å™¨çš„åŸºç¡€ç›‘æ§éƒ½æ˜¯è¦åšçš„ã€‚æˆ‘å°±æƒ³ï¼Œå¦‚ä½•èƒ½å¤Ÿå¿«é€Ÿä¾¿æ·çš„æ–¹å¼æŠŠè¿™äº›åŸºç¡€æŒ‡æ ‡éƒ½ç›‘æ§ä¸Šå‘¢ï¼Ÿæœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•é€šè¿‡Lambdaè‡ªåŠ¨ä¸ºæ‰€æœ‰EC2å®ä¾‹æ·»åŠ CloudWatchç£ç›˜å‘Šè­¦,å¹¶åœ¨ç£ç›˜åˆ©ç”¨ç‡è¶…è¿‡é˜ˆå€¼æ—¶,é€šè¿‡SNSä¸»é¢˜å‘é€é€šçŸ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‡†å¤‡å·¥ä½œ&#34;&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;åœ¨å¼€å§‹å‰,æˆ‘ä»¬éœ€è¦å‡†å¤‡:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AWSè´¦å·:å¼€é€šä¸€ä¸ªAWSè´¦å·ã€‚&lt;/li&gt;
&lt;li&gt;SNSä¸»é¢˜:åœ¨SNSä¸Šåˆ›å»ºä¸€ä¸ªä¸»é¢˜,å¹¶æ·»åŠ è®¢é˜…è€…ã€‚è®¢é˜…æ–¹å¼å¯ä»¥æ˜¯é‚®ä»¶ã€çŸ­ä¿¡ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;VPC ID:ç™»å½•VPCæ§åˆ¶å°è·å–VPC IDã€‚&lt;/li&gt;
&lt;li&gt;Lambdaï¼šéœ€è¦åˆ›å»ºä¸€ä¸ªLambdaã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;script async src=&#34;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4855142804875926&#34;
     crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
&lt;p&gt;&lt;ins class=&#34;adsbygoogle&#34;
style=&#34;display:block; text-align:center;&#34;
data-ad-layout=&#34;in-article&#34;
data-ad-format=&#34;fluid&#34;
data-ad-client=&#34;ca-pub-4855142804875926&#34;
data-ad-slot=&#34;5670838583&#34;&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;script&gt;
     (adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;h2 id=&#34;åˆ›å»ºsnsä¸»é¢˜&#34;&gt;åˆ›å»ºSNSä¸»é¢˜&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥,æˆ‘ä»¬éœ€è¦åœ¨AWS SNSä¸Šåˆ›å»ºä¸€ä¸ªä¸»é¢˜,å¹¶å°†è®¢é˜…è€…æ·»åŠ åˆ°ä¸»é¢˜ä¸­ã€‚è¿™äº›è®¢é˜…è€…å°†ä¼šæ¥æ”¶ç£ç›˜ä½¿ç”¨è¶…è¿‡é˜ˆå€¼æ—¶çš„é€šçŸ¥ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç”µå­é‚®ä»¶ã€çŸ­ä¿¡ç­‰é€šçŸ¥æ–¹å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç™»å½•åˆ° &lt;a href=&#34;https://console.amazonaws.cn/sns/v3/home?region=cn-north-1#/homepage&#34;&gt;Amazon SNS&lt;/a&gt; æ§åˆ¶å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/35f69846480d63485a46b59553ab6f8c.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å‡»å·¦ä¾§é¢æ¿ä¸Šçš„â€œä¸»é¢˜â€,ç„¶åå•å‡»â€œåˆ›å»ºä¸»é¢˜â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/28afa523cc51670d6cf30d17ca3b9c0c.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¾“å…¥ä¸»é¢˜åç§°å’Œä¸»é¢˜æ˜¾ç¤ºåç§°,å•å‡»â€œåˆ›å»ºä¸»é¢˜â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/2a3f4ac194863e700d01db8ff0623ac1.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ä¸»é¢˜é¡µé¢ä¸Š,å•å‡»â€œè®¢é˜…â€,é€‰æ‹©å¸Œæœ›æ¥æ”¶é€šçŸ¥çš„é€šçŸ¥æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/55338f231c2a9eceed812612abc75bd3.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹æ®é€‰å®šçš„è®¢é˜…ç±»å‹è¾“å…¥ç›¸å…³ä¿¡æ¯,å•å‡»â€œåˆ›å»ºè®¢é˜…â€ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸»é¢˜é¡µé¢ä¸Š,æ‚¨å°†çœ‹åˆ°å·²åˆ›å»ºçš„è®¢é˜…ã€‚&lt;br /&gt;
ä¸¾ä¸ªä¾‹å­,å¦‚æœæˆ‘ä»¬é€‰æ‹©â€œé‚®ä»¶â€ä½œä¸ºè®¢é˜…æ–¹å¼:&lt;/li&gt;
&lt;li&gt;åœ¨â€œç”µå­é‚®ä»¶è®¢é˜…â€ä¸‹,è¾“å…¥æ¥æ”¶é€šçŸ¥çš„ç”µå­é‚®ä»¶åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;å•å‡»â€œåˆ›å»ºè®¢é˜…â€ã€‚&lt;/li&gt;
&lt;li&gt;æ‚¨åº”ä¼šæ”¶åˆ°ä¸€å°æ¥è‡ªAWSé€šçŸ¥çš„éªŒè¯ç”µå­é‚®ä»¶ã€‚è¯·æŒ‰ç…§ç”µå­é‚®ä»¶ä¸­çš„è¯´æ˜è¿›è¡ŒéªŒè¯ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦éªŒè¯é€šè¿‡,è¯¥è®¢é˜…å°†å˜ä¸ºâ€œå·²éªŒè¯â€çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°åœ¨,å½“CloudWatchå‘Šè­¦è§¦å‘å¹¶è°ƒç”¨SNSä¸»é¢˜æ—¶,éªŒè¯çš„ç”µå­é‚®ä»¶åœ°å€å°†æ”¶åˆ°æœ‰å…³è­¦æŠ¥çš„ç”µå­é‚®ä»¶é€šçŸ¥ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ å¤šä¸ªè®¢é˜…ä»¥æ¥æ”¶é€šè¿‡ä¸åŒæ¸ é“çš„é€šçŸ¥,ä¾‹å¦‚ç”µå­é‚®ä»¶ã€çŸ­ä¿¡ç­‰ã€‚ æ·»åŠ è®¢é˜…è€…å,æˆ‘ä»¬å¯ä»¥åœ¨SNSä¸»é¢˜çš„â€œæ¦‚è¿°â€é¡µæŸ¥çœ‹è®¢é˜…çš„è¯¦ç»†ä¿¡æ¯å’ŒçŠ¶æ€ã€‚åœ¨æµ‹è¯•Lambdaå‡½æ•°æ—¶,è¿™æœ‰åŠ©äºç¡®ä¿è®¢é˜…è®¾ç½®æ­£ç¡®å’Œé€šçŸ¥èƒ½æ­£å¸¸å‘é€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆ›å»ºlambdaå‡½æ•°&#34;&gt;åˆ›å»ºLambdaå‡½æ•°&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥,æˆ‘ä»¬å¯ä»¥åœ¨Lambdaæ§åˆ¶å°åˆ›å»ºä¸€ä¸ªæ–°çš„Lambdaå‡½æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¿é—® &lt;a href=&#34;https://cn-north-1.console.amazonaws.cn/lambda/home?region=cn-north-1#/&#34;&gt;Amazon Lambda&lt;/a&gt; æ§åˆ¶å°,ç‚¹å‡»â€œ&lt;a href=&#34;https://cn-north-1.console.amazonaws.cn/lambda/home?region=cn-north-1#/create/function&#34;&gt;åˆ›å»ºå‡½æ•°&lt;/a&gt;â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/3268706f5e6d1e71367b976d84919a82.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹©â€œä»å¤´å¼€å§‹â€ ,è¾“å…¥å‡½æ•°åç§°,å¦‚â€œcreate_cloudwatch_alarm_for_ec2_disk_usageâ€ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©Pythonä½œä¸ºè¿è¡Œç¯å¢ƒ,é€‰æ‹© åˆ›å»ºå…·æœ‰åŸºæœ¬ Lambda æƒé™çš„æ–°è§’è‰²ã€‚&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»â€œåˆ›å»ºå‡½æ•°â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/ea193563e767167c9216936e943e7383.png&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç¼–å†™lambdaå‡½æ•°ä»£ç &#34;&gt;ç¼–å†™Lambdaå‡½æ•°ä»£ç &lt;/h2&gt;
&lt;p&gt;ä»£ç æˆ‘å·²ç»å†™å¥½äº†ï¼Œå„ä½å¤§ä½¬æ”¶å¥½ã€‚ä»£ç åŠŸèƒ½æ˜¯ä¸ºæ‰€æœ‰EC2å®ä¾‹è®¾ç½®CloudWatchç£ç›˜å‘Šè­¦,å½“ç£ç›˜åˆ©ç”¨ç‡è¶…è¿‡é˜ˆå€¼æ—¶,é€šè¿‡SNSä¸»é¢˜å‘é€é€šçŸ¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿æ¥EC2å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;è·å–VPCä¸­è¿è¡Œçš„EC2å®ä¾‹åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;éå†å®ä¾‹åˆ›å»ºCloudWatchç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”å‘Šè­¦ã€‚é»˜è®¤é˜ˆå€¼æ˜¯80%ã€‚&lt;/li&gt;
&lt;li&gt;å‘Šè­¦è§¦å‘SNSä¸»é¢˜â€œyou_sns_arnâ€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å°†ä¸‹é¢ä»£ç å¤åˆ¶åè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹ã€‚ç„¶åæ›¿æ¢æ‰åŸæœ‰ä»£ç åï¼Œç„¶åä¿å­˜å¹¶éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/f9796ca0b55f18f7187dcb9795cac07a.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å…·ä½“ä»£ç å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;Author       : Wenlong Xue 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;Date         : 2023-02-27 13:35
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;LastEditors  : Wenlong Xue 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;LastEditTime : 2023-02-27 17:52
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;Description  : ä¸º VPC ä¸­çš„ EC2 å®ä¾‹åˆ›å»ºç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”çš„ CloudWatch å‘Šè­¦ï¼Œå¹¶åœ¨ç£ç›˜ä½¿ç”¨è¶…è¿‡é˜ˆå€¼æ—¶å‘é€é€šçŸ¥åˆ° SNS ä¸»é¢˜
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;boto3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;lambda_handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;event&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# è¿æ¥åˆ° EC2 å®¢æˆ·ç«¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ec2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boto3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ec2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# è·å– VPC ä¸­è¿è¡Œä¸­çš„å®ä¾‹åˆ—è¡¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ec2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;describe_instances&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;Filters&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;s1&#34;&gt;&amp;#39;Name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;vpc-id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;s1&#34;&gt;&amp;#39;Values&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;vpc-xxxxxx&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;# ä¿®æ”¹VPC ID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;s1&#34;&gt;&amp;#39;Name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;instance-state-name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;s1&#34;&gt;&amp;#39;Values&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;running&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;# éå†å®ä¾‹å¹¶ä¸ºç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”åˆ›å»º CloudWatch å‘Šè­¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reservation&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Reservations&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reservation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Instances&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# è·å–å®ä¾‹ ID å’Œ Name æ ‡ç­¾&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;instance_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;InstanceId&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;instance_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Tags&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Key&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;n&#34;&gt;instance_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Value&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”çš„ CloudWatch å‘Šè­¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;cloudwatch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boto3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cloudwatch&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;cloudwatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;put_metric_alarm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;AlarmName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;-ç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;AlarmDescription&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; - ç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ActionsEnabled&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;AlarmActions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;you_sns_arn&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;# ä¿®æ”¹snsä¸»é¢˜,å¦‚:arn:aws-cn:sns:cn-north-1:xxxxx:HighDiskUsed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;MetricName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;disk_used_percent&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ ¹æ®æƒ…å†µä¿®æ”¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;Namespace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;CWAgent&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;# æ ¹æ®æƒ…å†µä¿®æ”¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;Dimensions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;s1&#34;&gt;&amp;#39;Name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;InstanceId&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                        &lt;span class=&#34;s1&#34;&gt;&amp;#39;Value&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance_id&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;Statistic&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Maximum&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;Period&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;EvaluationPeriods&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;Threshold&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;80.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;ComparisonOperator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;GreaterThanOrEqualToThreshold&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ç»™iamè§’è‰²æ·»åŠ æƒé™&#34;&gt;ç»™IAMè§’è‰²æ·»åŠ æƒé™&lt;/h2&gt;
&lt;p&gt;å› ä¸º åˆ›å»ºå…·æœ‰åŸºæœ¬ Lambda æƒé™çš„æ–°è§’è‰² çš„æƒé™å¹¶ä¸å®Œæ•´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠä»£ç ä¸­æ‰€è¦ç”¨åˆ°çš„æƒé™ç»™åˆ°è¿™ä¸ªæ–°è§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆ,Lambdaä¸­æ‰¾åˆ°è¿™ä¸ªè§‰å¾—ç„¶åç»™ä»–æ·»åŠ å¯¹åº”çš„æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/abb1aa9e258106f69746d686e8cb7530.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰¾åˆ°åˆ›å»ºçš„Lambda å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©å‡½æ•°æ±‡æ€»çš„é…ç½®&amp;ndash;æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°æ‰§è¡Œè§’è‰²ï¼Œå¹¶ç‚¹å‡»è§’è‰²åç§°è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/f77517e4f2441405ee4a9483692ac510.png&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚¹å‡»æ·»åŠ æƒé™ï¼Œé€‰æ‹©é™„åŠ ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;æ·»åŠ  &lt;code&gt;CloudWatchFullAccess&lt;/code&gt; å’Œ &lt;code&gt;AmazonEC2ReadOnlyAccess&lt;/code&gt; æƒé™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€åæƒé™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/bfa33a880cfce1bcd9a60e2fc8f04d46.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34; data-dir=&#34;ltr&#34;&gt;âš ï¸ è‹¥æç¤ºç¡®å°‘ä»€ä¹ˆæƒé™å°±è¡¥å……ä»€ä¹ˆæƒé™ã€‚&lt;/div&gt;
&lt;h2 id=&#34;æµ‹è¯•å‡½æ•°&#34;&gt;æµ‹è¯•å‡½æ•°&lt;/h2&gt;
&lt;p&gt;ç°åœ¨,æˆ‘ä»¬å·²ç»åˆ›å»ºLambdaå‡½æ•°å’ŒSNSä¸»é¢˜,å¹¶å°†è®¢é˜…è€…æ·»åŠ åˆ°ä¸»é¢˜ã€‚æˆ‘ä»¬å¯ä»¥æµ‹è¯•Lambdaå‡½æ•°åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è¿è¡Œæµ‹è¯•æ¥è§‚å¯Ÿ CloudWatchå‘Šè­¦é¡¹æœ‰æ²¡æœ‰è¢«æ·»åŠ ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæ·»åŠ è§¦å‘å™¨ã€‚å¦‚ï¼šå›ºå®šæ—¶é—´æ®µè¿è¡Œä¸€æ¬¡ï¼Œæ¥éå†æ–°åŠ çš„æœåŠ¡å™¨ã€‚ç„¶åæ·»åŠ å‘Šè­¦é¡¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ&#34;&gt;å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;div class=&#34;notices info&#34; data-title=&#34;å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ&#34;&gt;
  Q1: æ²¡æ”¶åˆ°SNSé€šçŸ¥æ€ä¹ˆåŠ?&lt;br /&gt;
A1: ç¡®è®¤è®¢é˜…é‚®ç®±æ˜¯å¦æ­£ç¡®ã€‚æ£€æŸ¥AWSè´¦å·æ˜¯å¦æœ‰æƒé™å‘SNSå‘é€é€šçŸ¥ã€‚&lt;br /&gt;
Q2: å¦‚ä½•ä¿®æ”¹ç£ç›˜ä½¿ç”¨é˜ˆå€¼?&lt;br /&gt;
A2: ç¼–è¾‘Lambdaå‡½æ•°ä»£ç ,æ›´æ”¹&amp;quot;Threshold&amp;quot;çš„å€¼ã€‚&lt;br /&gt;
Q3: CloudWatchçš„å‘Šè­¦é¡¹ä¸­æ˜¾ç¤ºæ•°æ®ä¸è¶³æ€ä¹ˆåŠ?&lt;br /&gt;
A3: æŸ¥çœ‹CloudWatchä¸­åŸæœ¬ç£ç›˜çš„æŒ‡æ ‡åç§°ï¼Œå¹¶ä¿®æ”¹Lambdaå‡½æ•°ä»£ç å¯¹åº”çš„å€¼ï¼šMetricName=&amp;lsquo;disk_used_percent&amp;rsquo;ï¼›Namespace=&amp;lsquo;CWAgent&amp;rsquo;
&lt;/div&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;AWS Lambdaæ–‡æ¡£: &lt;a href=&#34;https://docs.aws.amazon.com/lambda/&#34;&gt;https://docs.aws.amazon.com/lambda/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;AWS CloudWatchæ–‡æ¡£: &lt;a href=&#34;https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/&#34;&gt;https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;AWS SNSæ–‡æ¡£: &lt;a href=&#34;https://docs.aws.amazon.com/sns/index.html&#34;&gt;https://docs.aws.amazon.com/sns/index.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;SREè¿ç»´åšå®¢&lt;/a&gt;&lt;br /&gt;
åšå®¢åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;https://www.cnsre.cn/&lt;/a&gt;&lt;br /&gt;
æ–‡ç« åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/posts/230506425079/&#34;&gt;https://www.cnsre.cn/posts/230506425079/&lt;/a&gt;&lt;br /&gt;
ç›¸å…³è¯é¢˜ï¼š&lt;a href=&#34;https://www.cnsre.cn/tags/lambda/&#34;&gt;https://www.cnsre.cn/tags/lambda/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
</content:encoded>
        <dc:creator>CNSRE</dc:creator>
        <media:content url="http://localhost:1313/https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/logo/lambda.png" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>lambda</category>
            
          
            
              <category>aws</category>
            
          
            
              <category>cloudwatch</category>
            
          
            
              <category>sns</category>
            
          
            
              <category>python</category>
            
          
        
        
          
            
              <category>lambda</category>
            
          
            
              <category>cloudwatch</category>
            
          
            
              <category>aws</category>
            
          
            
              <category>sns</category>
            
          
            
              <category>python</category>
            
          
        
        
      </item>
      
      <item>
        <title>Lambdaå‡½æ•°æ£€æŸ¥S3æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</title>
        <link>http://localhost:1313/posts/230410659053/</link>
        <pubDate>Mon, 10 Apr 2023 16:59:07 +0800</pubDate>
        
        <atom:modified>Fri, 30 Aug 2024 18:16:52 +0800</atom:modified>
        <guid>http://localhost:1313/posts/230410659053/</guid>
        <description>ä½œè€…ï¼šSREè¿ç»´åšå®¢ åšå®¢åœ°å€ï¼šhttps://www.cnsre.cn/ æ–‡ç« åœ°å€ï¼šhttps://www.cnsre.cn/posts/23</description>
        <content:encoded>&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;SREè¿ç»´åšå®¢&lt;/a&gt;&lt;br /&gt;
åšå®¢åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;https://www.cnsre.cn/&lt;/a&gt;&lt;br /&gt;
æ–‡ç« åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/posts/230410659053/&#34;&gt;https://www.cnsre.cn/posts/230410659053/&lt;/a&gt;&lt;br /&gt;
ç›¸å…³è¯é¢˜ï¼š&lt;a href=&#34;https://www.cnsre.cn/tags/lambda/&#34;&gt;https://www.cnsre.cn/tags/lambda/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h1 id=&#34;lambdaå‡½æ•°æ£€æŸ¥s3æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨&#34;&gt;Lambdaå‡½æ•°æ£€æŸ¥S3æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨&lt;/h1&gt;
&lt;p&gt;ä½œä¸º AWS ä¸­æœ€å¸¸ç”¨çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ŒS3 å¯ä»¥ç”¨äºå­˜å‚¨å„ç§ç±»å‹çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç«™æ–‡ä»¶ã€åª’ä½“æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶ç­‰ç­‰ã€‚åœ¨ S3 ä¸­å­˜å‚¨çš„æ–‡ä»¶å¯ä»¥é€šè¿‡ä¸åŒçš„æ–¹å¼è®¿é—®ï¼Œä¾‹å¦‚åœ¨ Web åº”ç”¨ç¨‹åºä¸­ã€é€šè¿‡ç§»åŠ¨åº”ç”¨ç¨‹åºæˆ–ç›´æ¥ä½¿ç”¨ AWS SDK è®¿é—®ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿›è¡Œ S3 å­˜å‚¨æ—¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å°†å­˜å‚¨çš„æ—¥å¿—åŒæ­¥åˆ°å¦ä¸€ä¸ªæ¡¶æˆ–åŒºåŸŸä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ AWS çš„ S3 æ—¥å¿—åŒæ­¥ä»»åŠ¡åŠŸèƒ½ã€‚é€šè¿‡å°†æ—¥å¿—åŒæ­¥åˆ°å…¶ä»–å­˜å‚¨æ¡¶æˆ–åŒºåŸŸä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°å¯¹æ—¥å¿—è¿›è¡Œåˆ†æã€ç›‘æ§å’Œç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœ S3 æ—¥å¿—åŒæ­¥ä»»åŠ¡å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•åŠæ—¶è·å–ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯ã€‚å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿æ—¥å¿—åŒæ­¥ä»»åŠ¡çš„æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä»»åŠ¡è¿›è¡Œç›‘æ§ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ AWS Lambda ç›‘æ§ S3 æ—¥å¿—åŒæ­¥ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;script async src=&#34;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4855142804875926&#34;
     crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
&lt;p&gt;&lt;ins class=&#34;adsbygoogle&#34;
style=&#34;display:block; text-align:center;&#34;
data-ad-layout=&#34;in-article&#34;
data-ad-format=&#34;fluid&#34;
data-ad-client=&#34;ca-pub-4855142804875926&#34;
data-ad-slot=&#34;5670838583&#34;&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;script&gt;
     (adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;h2 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h2&gt;
&lt;p&gt;AWS Lambda æ˜¯ä¸€ç§æ— æœåŠ¡å™¨è®¡ç®—æœåŠ¡ï¼Œå¯ä½¿æ‚¨åœ¨äº‘ä¸­è¿è¡Œä»£ç ï¼Œè€Œæ— éœ€è‡ªå·±ç®¡ç†æœåŠ¡å™¨ã€‚é€šè¿‡ä½¿ç”¨ Lambdaï¼Œæ‚¨å¯ä»¥å°†ä»£ç ä¸Šä¼ åˆ°äº‘ä¸­ï¼Œç„¶å Lambda ä¼šæ ¹æ®éœ€è¦è‡ªåŠ¨æ‰©å±•å’Œç¼©å‡è®¡ç®—èµ„æºï¼Œä»¥æ»¡è¶³æ‚¨çš„åº”ç”¨ç¨‹åºçš„è¯·æ±‚ã€‚Lambda è¿˜æ”¯æŒè®¸å¤šç¼–ç¨‹è¯­è¨€å’Œåº“ï¼Œä½¿æ‚¨èƒ½å¤Ÿç¼–å†™åŠŸèƒ½å¼ºå¤§çš„åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Lambda ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†å®šæœŸæ£€æŸ¥ S3 å­˜å‚¨æ¡¶ä¸­çš„æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ä»»ä½•æ–‡ä»¶å¤¹ï¼Œåˆ™ Lambda å°†å‘æŒ‡å®šçš„ SNS ä¸»é¢˜å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä»¥ä¾¿ç®¡ç†å‘˜å¯ä»¥åŠæ—¶é‡‡å–æªæ–½ã€‚é€šè¿‡ä½¿ç”¨ Lambda ç›‘æ§ S3 å­˜å‚¨æ¡¶ä¸­çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ—¥å¿—åŒæ­¥ä»»åŠ¡çš„æ­£å¸¸è¿è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-å‡†å¤‡å·¥ä½œ&#34;&gt;1. å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå‡†å¤‡å¥½ä»¥ä¸‹å·¥ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªS3æ¡¶ï¼Œç”¨äºå­˜å‚¨æˆ‘ä»¬è¦æ£€æŸ¥çš„æ–‡ä»¶å¤¹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªSNSä¸»é¢˜ï¼Œç”¨äºå‘é€æ¶ˆæ¯æé†’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-åˆ›å»ºlambdaå‡½æ•°&#34;&gt;2. åˆ›å»ºLambdaå‡½æ•°&lt;/h2&gt;
&lt;p&gt;åœ¨AWSæ§åˆ¶å°ä¸Šåˆ›å»ºä¸€ä¸ªPython Lambdaå‡½æ•°ï¼Œåç§°ä¸º&lt;code&gt;s3-folder-exist-checker&lt;/code&gt;ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import boto3
from datetime import datetime, timedelta
from dateutil import tz

def lambda_handler(event, context):
    print(&amp;#39;Lambda å‡½æ•°å·²å¯åŠ¨.&amp;#39;)
    
    s3 = boto3.resource(&amp;#39;s3&amp;#39;)
    bucket_name = &amp;#39;my_s3_bucket_name&amp;#39;
    local_tz = tz.gettz(&amp;#39;Asia/Shanghai&amp;#39;)
    now = datetime.now()
    date_prefix = now.strftime(&amp;#39;%Y/%m/%d/&amp;#39;)
    
    folder_prefixes = [&amp;#39;my_prefixes/&amp;#39; + date_prefix, &amp;#39;my_prefixes/&amp;#39; + date_prefix, &amp;#39;RGC-Prod-3in1oven/&amp;#39; + date_prefix]
    folder_prefixes = [prefix + &amp;#39;/&amp;#39; if not prefix.endswith(&amp;#39;/&amp;#39;) else prefix for prefix in folder_prefixes]  # ç¡®ä¿æ¯ä¸ªå‰ç¼€ä»¥æ–œæ ç»“å°¾
    
    print(&amp;#39;æ­£åœ¨æ£€æŸ¥ä»¥ä¸‹ S3 æ–‡ä»¶å¤¹ï¼š&amp;#39;, folder_prefixes)
    
    sns = boto3.client(&amp;#39;sns&amp;#39;)
    topic_arn = &amp;#39;arn:aws-cn:sns:cn-north-1:1234567890:s3-logs-monitoring&amp;#39;
    
    for prefix in folder_prefixes:
        resp = s3.meta.client.list_objects_v2(Bucket=bucket_name, Prefix=prefix, Delimiter=&amp;#39;/&amp;#39;)
        subfolders = [p[&amp;#39;Prefix&amp;#39;] for p in resp.get(&amp;#39;CommonPrefixes&amp;#39;, [])]
    
        if len(subfolders) &amp;gt; 0:
            print(f&amp;#34;å­æ–‡ä»¶å¤¹ &amp;#39;{prefix}&amp;#39; å­˜åœ¨:&amp;#34;)
            for folder in subfolders:
                print(f&amp;#34;å‘ç°å­æ–‡ä»¶å¤¹: {folder}&amp;#34;)
        else:
            message = f&amp;#34;S3æ¡¶&amp;#39;{bucket_name}ä¸­&amp;#39;{prefix}&amp;#39;ä¸‹ä¸å­˜åœ¨æ–°å¢æ–‡ä»¶å¤¹,å³æ—¥å¿—åŒæ­¥S3æ¡¶ä»»åŠ¡å¤±è´¥.è¯·æ£€æŸ¥.&amp;#39;&amp;#34;
            sns.publish(TopicArn=topic_arn, Message=message)
            print(f&amp;#34;å·²å‘é€ SNS æ¶ˆæ¯: {message}&amp;#34;)
        
    print(&amp;#39;Lambda å‡½æ•°å·²å®Œæˆ.&amp;#39;)
    
    return {
        &amp;#39;statusCode&amp;#39;: 200,
        &amp;#39;body&amp;#39;: &amp;#39;S3 æ–‡ä»¶å¤¹å­˜åœ¨æ€§æ£€æŸ¥å·²å®Œæˆ.&amp;#39;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ä¸‹æ¥æ˜¯å¯¹ Lambda å‡½æ•°ä¸­çš„ä¸€äº›ç»†èŠ‚è¿›è¡Œè®²è§£ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº† S3 çš„èµ„æºï¼Œå¹¶ä¸”æŒ‡å®šäº† S3 æ¡¶çš„åç§°ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;s3 = boto3.resource(&amp;#39;s3&amp;#39;)
bucket_name = &amp;#39;my_bucket_name&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ç€ï¼Œæˆ‘ä»¬è·å–å½“å‰çš„æ—¶é—´ï¼Œå¹¶ä¸”æ ¹æ®å½“å‰æ—¶é—´ç”Ÿæˆä¸€ä¸ªç›®å½•å‰ç¼€ã€‚æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;dateutil&lt;/code&gt; æ¨¡å—ä¸­çš„ &lt;code&gt;tz.gettz&lt;/code&gt; å‡½æ•°æ¥è·å–ä¸€ä¸ªæœ¬åœ°çš„æ—¶åŒºä¿¡æ¯ã€‚ä¸ºäº†ç¡®ä¿æ—¶åŒºçš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬å»ºè®®åœ¨ä½¿ç”¨ Lambda å‡½æ•°æ—¶ï¼Œæ˜¾å¼åœ°è®¾ç½®æ—¶åŒºä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;local_tz = tz.gettz(&amp;#39;Asia/Shanghai&amp;#39;)
now = datetime.now(local_tz)
date_prefix = now.strftime(&amp;#39;%Y/%m/%d/&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ Lambda å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† &lt;code&gt;list_objects_v2&lt;/code&gt; æ–¹æ³•æ¥åˆ—ä¸¾æŒ‡å®šçš„æ–‡ä»¶å¤¹ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† &lt;code&gt;CommonPrefixes&lt;/code&gt; å‚æ•°ï¼Œè¯¥å‚æ•°å¯ä»¥è¿”å›æŒ‡å®šå‰ç¼€ä¸‹çš„å­æ–‡ä»¶å¤¹åˆ—è¡¨ã€‚å¦‚æœè¿”å›çš„å­æ–‡ä»¶å¤¹åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™è¯´æ˜æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€‚å¦‚æœå­æ–‡ä»¶å¤¹åˆ—è¡¨ä¸ä¸ºç©ºï¼Œåˆ™è¯´æ˜æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªå­æ–‡ä»¶å¤¹çš„è·¯å¾„æ‰“å°å‡ºæ¥ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;resp = s3.meta.client.list_objects_v2(Bucket=bucket_name, Prefix=prefix, Delimiter=&amp;#39;/&amp;#39;)
subfolders = [p[&amp;#39;Prefix&amp;#39;] for p in resp.get(&amp;#39;CommonPrefixes&amp;#39;, [])]

if len(subfolders) &amp;gt; 0:
    print(f&amp;#34;å­æ–‡ä»¶å¤¹ &amp;#39;{prefix}&amp;#39; å­˜åœ¨:&amp;#34;)
    for folder in subfolders:
        print(f&amp;#34;å‘ç°å­æ–‡ä»¶å¤¹: {folder}&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœå­æ–‡ä»¶å¤¹åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™è¯´æ˜æ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ SNS æœåŠ¡å‘é€ä¸€æ¡æ¶ˆæ¯æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;if len(subfolders) == 0:
    message = f&amp;#34;S3æ¡¶&amp;#39;{bucket_name}ä¸­&amp;#39;{prefix}&amp;#39;ä¸‹ä¸å­˜åœ¨æ–°å¢æ–‡ä»¶å¤¹,å³æ—¥å¿—åŒæ­¥S3æ¡¶ä»»åŠ¡å¤±è´¥.è¯·æ£€æŸ¥.&amp;#39;&amp;#34;
    sns.publish(TopicArn=topic_arn, Message=message)
    print(f&amp;#34;å·²å‘é€ SNS æ¶ˆæ¯: {message}&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬è¿”å›äº†ä¸€ä¸ªåŒ…å«çŠ¶æ€ç å’Œæ¶ˆæ¯çš„å­—å…¸ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ Lambda å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ç›‘æ§æ‰§è¡ŒçŠ¶æ€ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;return {
    &amp;#39;statusCode&amp;#39;: 200,
    &amp;#39;body&amp;#39;: &amp;#39;S3 æ–‡ä»¶å¤¹å­˜åœ¨æ€§æ£€æŸ¥å·²å®Œæˆ.&amp;#39;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¡®ä¿æ‚¨çš„ Lambda å‡½æ•°æœ‰æƒé™è®¿é—® S3 å’Œ SNS&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ AWS Lambda æ§åˆ¶å°ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Lambda å‡½æ•°ã€‚åœ¨å‡½æ•°ä»£ç ä¸­å°† Python ä»£ç ç²˜è´´åˆ°ä»£ç ç¼–è¾‘å™¨ä¸­ã€‚è¯·ç¡®ä¿æ‚¨é€‰æ‹©äº†æ­£ç¡®çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå¹¶è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BUCKET_NAME&lt;/code&gt;ï¼šæ‚¨çš„ S3 æ¡¶åç§°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SNS_TOPIC_ARN&lt;/code&gt;ï¼šSNS ä¸»é¢˜çš„ ARN&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é…ç½® Lambda å‡½æ•°çš„åŸºæœ¬è®¾ç½®å’Œé«˜çº§è®¾ç½®ï¼ŒåŒ…æ‹¬å†…å­˜å’Œè¶…æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Lambda æ§åˆ¶å°ä¸­ï¼Œæµ‹è¯• Lambda å‡½æ•°ï¼Œä»¥ç¡®ä¿ Lambda å‡½æ•°èƒ½å¤Ÿè®¿é—® S3 æ¡¶å’Œ SNS ä¸»é¢˜ã€‚ä¸ºäº†æµ‹è¯•è¯¥å‡½æ•°ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•äº‹ä»¶ï¼Œè¯¥äº‹ä»¶éœ€è¦ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€åï¼Œæ‚¨éœ€è¦åœ¨ Amazon CloudWatch ä¸­è®¾ç½® CloudWatch Events è§„åˆ™ä»¥å®šæœŸè§¦å‘ Lambda å‡½æ•°ã€‚è¿™æ ·æ‚¨çš„ Lambda å‡½æ•°å°±èƒ½åœ¨æ‚¨é¢„å®šçš„æ—¶é—´æ£€æŸ¥ S3 æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨å¹¶å‘é€é€šçŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªä½¿ç”¨ AWS Lambdaã€S3 å’Œ SNS çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡å®šæœŸæ£€æŸ¥ S3 æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨å¹¶å‘é€é€šçŸ¥ã€‚æˆ‘ä»¬è§£é‡Šäº†å¦‚ä½•ç¼–å†™ Python ä»£ç æ¥å®ç°æ­¤ä»»åŠ¡ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªè¯¦ç»†çš„ä»£ç ç¤ºä¾‹ã€‚æˆ‘ä»¬è¿˜ä»‹ç»äº†å¦‚ä½•åœ¨ AWS Lambda å’Œ Amazon SNS æ§åˆ¶å°ä¸Šé…ç½® Lambda å‡½æ•°å’Œ SNS ä¸»é¢˜ï¼Œå¹¶åœ¨ Amazon CloudWatch ä¸­åˆ›å»ºå®šæœŸè§¦å‘å™¨æ¥è§¦å‘ Lambda å‡½æ•°ã€‚æœ€åï¼Œæˆ‘ä»¬æä¾›äº†ä¸€äº›æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹ï¼Œä»¥ç¡®ä¿æ‚¨çš„ Lambda å‡½æ•°å’Œ SNS ä¸»é¢˜èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·åœ¨ä¸‹é¢çš„è¯„è®ºåŒºç•™è¨€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒæ–‡çŒ®&#34;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.aws.amazon.com/lambda/index.html&#34;&gt;AWS Lambda æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.aws.amazon.com/s3/index.html&#34;&gt;AWS S3 æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.aws.amazon.com/sns/index.html&#34;&gt;AWS SNS æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;SREè¿ç»´åšå®¢&lt;/a&gt;&lt;br /&gt;
åšå®¢åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;https://www.cnsre.cn/&lt;/a&gt;&lt;br /&gt;
æ–‡ç« åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/posts/230410659053/&#34;&gt;https://www.cnsre.cn/posts/230410659053/&lt;/a&gt;&lt;br /&gt;
ç›¸å…³è¯é¢˜ï¼š&lt;a href=&#34;https://www.cnsre.cn/tags/lambda/&#34;&gt;https://www.cnsre.cn/tags/lambda/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
</content:encoded>
        <dc:creator>CNSRE</dc:creator>
        <media:content url="http://localhost:1313/https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/logo/lambda.png" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>lambda</category>
            
          
            
              <category>python</category>
            
          
            
              <category>aws</category>
            
          
        
        
          
            
              <category>lambda</category>
            
          
            
              <category>python</category>
            
          
            
              <category>aws</category>
            
          
        
        
      </item>
      
      <item>
        <title>ä½¿ç”¨ Lambda å‡½æ•°å°† CloudWatch Log ä¸­çš„æ—¥å¿—å½’æ¡£åˆ° S3 æ¡¶ä¸­</title>
        <link>http://localhost:1313/posts/221205544069/</link>
        <pubDate>Tue, 06 Dec 2022 11:48:12 +0800</pubDate>
        
        <atom:modified>Fri, 30 Aug 2024 18:16:52 +0800</atom:modified>
        <guid>http://localhost:1313/posts/221205544069/</guid>
        <description>ä½œè€…ï¼šSREè¿ç»´åšå®¢ åšå®¢åœ°å€ï¼šhttps://www.cnsre.cn/ æ–‡ç« åœ°å€ï¼šhttps://www.cnsre.cn/posts/22</description>
        <content:encoded>&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;SREè¿ç»´åšå®¢&lt;/a&gt;&lt;br /&gt;
åšå®¢åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;https://www.cnsre.cn/&lt;/a&gt;&lt;br /&gt;
æ–‡ç« åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/posts/221205544069/&#34;&gt;https://www.cnsre.cn/posts/221205544069/&lt;/a&gt;&lt;br /&gt;
ç›¸å…³è¯é¢˜ï¼š&lt;a href=&#34;https://www.cnsre.cn/tags/aws/&#34;&gt;https://www.cnsre.cn/tags/aws/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;p&gt;èººäº†å¥½ä¹…ï¼Œè¯ˆå°¸äº†ã€‚å› ä¸ºæ¢äº†å·¥ä½œï¼Œæ‰€ä»¥æ¯”è¾ƒå¿™ä¸€ç›´æ²¡æœ‰æ—¶é—´å»æ›´æ–°åšå®¢çš„å†…å®¹ï¼ˆä¸»è¦è¿˜æ˜¯å› ä¸ºæ‡’ğŸ¤”ï¼‰&lt;br /&gt;
&lt;img src=&#34;https://media1.giphy.com/media/P8WZZ0NYdbXAA/giphy.gif?cid=b4cf699d3clr6qwrgzfeya3tzswbivhlflyolhyiooah0k0y&amp;rid=giphy.gif&amp;ct=g&#34;&gt;&lt;br /&gt;
è¯ä¸å¤šè¯´ ç›´æ¥ä¸Šå¹²è´§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éœ€æ±‚èƒŒæ™¯&#34;&gt;éœ€æ±‚èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘åœ¨çœ‹è´¹ç”¨çš„æ—¶å€™å‘ç°æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†è´¹ç”¨éƒ½æ˜¯ cloudwatch logä¸­å­˜å‚¨äº†å¤§é‡çš„æ•°æ®ï¼Œæ˜¯å› ä¸ºec2 å°†æ—¥å¿—ä¼ è¾“åˆ°äº†å­˜å‚¨åˆ°äº†cloudwatchä¸­ã€‚è¿™ä¸ªå­˜å‚¨çš„å¤šçš„æŸ¥è¯¢æ—¥å¿—çš„æ—¶å€™æ”¶è´¹ç‰¹åˆ«çš„é«˜ã€‚å¦å¤–ä¸€ä¸ªæ˜¯å› ä¸ºæ•°æ®åˆ†æç”¨é€”ï¼Œå¤§æ•°æ®åˆ†æçš„åŒäº‹å¦‚æœæƒ³é‚£åˆ°æ•°æ®çš„è¯ï¼Œè¿˜æ˜¯å­˜å‚¨åœ¨ S3 ä¸­æ˜¯æ¯”è¾ƒåˆ’ç®—å’Œæ–¹ä¾¿çš„ï¼Œä¸€ä¸ªæ˜¯æ‹¿å–æ•°æ®æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯S3 å¯ä»¥æœ€å½’æ¡£å­˜å‚¨ï¼Œåé¢çš„å¤§é‡æ•°æ®å¯ä»¥åˆ†å±‚å‚¨å­˜ï¼Œä»¥æ­¤æ¥é™ä½è´¹ç”¨ã€‚&lt;br /&gt;
å¦‚æœä½ ä¹Ÿæƒ³å°†ä½ çš„cloudwatch ä¸­æ—¥å¿—ç»„ä¸­çš„æ—¥å¿—å­˜å‚¨åˆ°S3ä¸­çš„è¯å¯ä»¥å‚è€ƒä¸‹è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‰ç½®æ¡ä»¶&#34;&gt;å‰ç½®æ¡ä»¶&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»º ä¸€ä¸ª S3 æ¡¶ï¼Œå¹¶ä¿®æ”¹æƒé™&lt;/li&gt;
&lt;li&gt;åˆ›å»º lambda å‡½æ•°&lt;/li&gt;
&lt;li&gt;æœ‰ä¸€ä¸ªCloudwatch æ—¥å¿—ç»„å¹¶ä¸”æœ‰ä¸€å¤©ä»¥ä¸Šçš„æ—¥å¿—&lt;/li&gt;
&lt;li&gt;ç»™ lambdaåˆ†é…æ‰€éœ€çš„æƒé™&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ›å»º-s3-æ¡¶å¹¶ä¿®æ”¹æƒé™&#34;&gt;åˆ›å»º S3 æ¡¶å¹¶ä¿®æ”¹æƒé™&lt;/h2&gt;
&lt;p&gt;&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/fe1735857fa4d0c1041cc85ceaa7c4c9.png&#34;&gt;&lt;/p&gt;

&lt;div id=&#34;cce8ceef9aa8179c&#34; class=&#34;tab&#34;&gt;
  &lt;div class=&#34;tab__links&#34;&gt;
    
      &lt;button class=&#34;tab__link&#34; aria-label=&#34;Tab link&#34;&gt;å›½å†…S3æ¡¶æƒé™é…ç½®&lt;/button&gt;
    
      &lt;button class=&#34;tab__link&#34; aria-label=&#34;Tab link&#34;&gt;å›½å¤–S3æ¡¶æƒé™é…ç½®&lt;/button&gt;
    
  &lt;/div&gt;
  

&lt;div id=&#34;5c3bafdf2a21d447&#34; class=&#34;tab__content&#34;&gt;
  &lt;h3 id=&#34;å›½å†…s3æ¡¶æƒé™é…ç½®&#34;&gt;å›½å†…S3æ¡¶æƒé™é…ç½®&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Version&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2012-10-17&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Statement&amp;#34;: &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Effect&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Allow&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Principal&amp;#34;: &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Service&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;logs.cn-north-1.amazonaws.com.cn&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;}&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Action&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;s3:GetBucketAcl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Resource&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;arn:aws-cn:s3:::&amp;lt;bucket name&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;}&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Effect&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Allow&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Principal&amp;#34;: &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Service&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;logs.cn-north-1.amazonaws.com.cn&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;}&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Action&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;s3:PutObject&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Resource&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;arn:aws-cn:s3:::&amp;lt;bucket name&amp;gt;/*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Condition&amp;#34;: &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;StringEquals&amp;#34;: &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;s3:x-amz-acl&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;bucket-owner-full-control&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&#34;cc2126f016450976&#34; class=&#34;tab__content&#34;&gt;
  &lt;h3 id=&#34;å›½å¤–s3æ¡¶æƒé™é…ç½®&#34;&gt;å›½å¤–S3æ¡¶æƒé™é…ç½®&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Version&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2012-10-17&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Statement&amp;#34;: &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Action&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;s3:GetBucketAcl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Effect&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Allow&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Resource&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;arn:aws:s3:::&amp;lt;bucket name&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Principal&amp;#34;: { &amp;#34;Service&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;logs.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;}&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Action&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;s3:PutObject&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Effect&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Allow&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Resource&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;arn:aws:s3:::&amp;lt;bucket name&amp;gt;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Condition&amp;#34;: { &amp;#34;StringEquals&amp;#34;: { &amp;#34;s3:x-amz-acl&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;bucket-owner-full-control&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;}&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Principal&amp;#34;: { &amp;#34;Service&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;logs.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;script&gt;
  &#39;use strict&#39;;

  var containerId = JSON.parse(&#34;\&#34;cce8ceef9aa8179c\&#34;&#34;);
  var containerElem = document.getElementById(containerId);
  var tabLinks = null;
  var tabContents = null;
  var ids = [];

  if (containerElem) {
    tabLinks = containerElem.querySelectorAll(&#39;.tab__link&#39;);
    tabContents = containerElem.querySelectorAll(&#39;.tab__content&#39;);
  }

  for (var i = 0; i &lt; tabContents.length; i++) {
    ids = ids.concat(tabContents[i].getAttribute(&#39;id&#39;));
    tabContents[i].style.display = &#39;none&#39;;

    if (0 === parseInt(i, 10) &amp;&amp; !tabContents[i].classList.contains(&#39;active&#39;)) {
      tabContents[i].classList.add(&#39;active&#39;);
    }
  }

  for (var i = 0; i &lt; tabLinks.length; i++) {
    tabLinks[i].setAttribute(&#39;id&#39;, ids[i]);

    if (0 === parseInt(i, 10) &amp;&amp; !tabLinks[i].classList.contains(&#39;active&#39;)) {
      tabLinks[i].classList.add(&#39;active&#39;);
    } else {
      tabLinks[i].classList.remove(&#39;active&#39;);
    }
  }

  if (tabContents.length &gt; 0) {
    tabContents[0].style.display = &#39;block&#39;;
  }
&lt;/script&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.aws.amazon.com/zh_cn/AmazonCloudWatch/latest/logs/S3ExportTasks.html#S3Permissions&#34;&gt;S3 æ¡¶æƒé™æ–‡æ¡£é“¾æ¥&lt;/a&gt;&lt;/p&gt;
&lt;script async src=&#34;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4855142804875926&#34;
     crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
&lt;p&gt;&lt;ins class=&#34;adsbygoogle&#34;
style=&#34;display:block; text-align:center;&#34;
data-ad-layout=&#34;in-article&#34;
data-ad-format=&#34;fluid&#34;
data-ad-client=&#34;ca-pub-4855142804875926&#34;
data-ad-slot=&#34;5670838583&#34;&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;script&gt;
     (adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;h2 id=&#34;åˆ›å»º-lambda-å‡½æ•°&#34;&gt;åˆ›å»º lambda å‡½æ•°&lt;/h2&gt;
&lt;h3 id=&#34;åˆ›å»º-lambda&#34;&gt;åˆ›å»º lambda&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;boto3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;logging&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;datetime&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;json&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getLogger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setLevel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;export_s3_logs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bucket_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_group_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_stream_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;days_of_logs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    today = datetime.datetime.combine(datetime.datetime.utcnow(), datetime.datetime.min.time())
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    day_end = today
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    day_start = today - datetime.timedelta(days=days_of_logs)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;today&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;combine&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utcnow&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timedelta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hours&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                                      &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# UTC+8 &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;day_end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;today&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timedelta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hours&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# UTC&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;day_start&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;today&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timedelta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;days&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;days_of_logs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hours&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# UTC    &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;#print(day_start)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ts_start&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{0:.0f}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;day_start&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1970&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;total_seconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;ts_end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;{0:.0f}&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;day_end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1970&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;total_seconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;the_date&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;today&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;year&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;today&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;month&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:],&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;today&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;day&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:]])&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;#folder_name = &amp;#39;/&amp;#39;.join([log_group_name, log_stream_name, the_date])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;folder_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log_group_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;the_date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;boto3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;logs&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;#print (ts_start, ts_end)#, day_start, day_end,the_date&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;task_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create_export_task&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;logGroupName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log_group_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;c1&#34;&gt;#logStreamNamePrefix=log_stream_name,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;fromTime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ts_start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ts_end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bucket_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;destinationPrefix&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;folder_name&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;taskId&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;describe_export_tasks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;taskId&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;task_id&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;exportTasks&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;status&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;COMPLETED&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;RUNNING&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;lambda_handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;event&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;region&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;cn-northwest-1&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# æ—¥å¿—ç»„æ‰€åœ¨åŒºåŸŸ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;bucket_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;bucket name&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;#åŒåŒºåŸŸå†…çš„S3æ¡¶åç§°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;log_group_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;lt;log group name&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;#æ—¥å¿—ç»„åç§°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;log_stream_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;1&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;#é»˜è®¤å³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;log_export_days&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;#é»˜è®¤å³å¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;export_s3_logs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bucket_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_group_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_stream_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_export_days&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ç»™-lambda-åˆ†é…æƒé™&#34;&gt;ç»™ lambda åˆ†é…æƒé™&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;AmazonS3çš„è¯»å†™æƒé™&lt;/li&gt;
&lt;li&gt;CloudWatchLogsFullAccess&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;éªŒè¯æ¡¶å†…çš„æ–‡ä»¶&#34;&gt;éªŒè¯æ¡¶å†…çš„æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;æœ€åä¼šä»¥æ—¥æœŸçš„ç›®å½•å°†æ—¥å¿—å½’æ¡£èµ·æ¥ï¼Œä»¥æ–¹ä¾¿æ—¥åå¯¹å½’æ¡£æ–‡ä»¶è¿›è¡Œæ¢³ç†ã€‚&lt;br /&gt;
&lt;img alt=&#34;sreè¿ç»´|Linuxè¿ç»´|å…³é”®è¯&#34; src=&#34;https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/cnsre/b1b86970fe109d73d7bb447f505a32ca.png&#34;&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;SREè¿ç»´åšå®¢&lt;/a&gt;&lt;br /&gt;
åšå®¢åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/&#34;&gt;https://www.cnsre.cn/&lt;/a&gt;&lt;br /&gt;
æ–‡ç« åœ°å€ï¼š&lt;a href=&#34;https://www.cnsre.cn/posts/221205544069/&#34;&gt;https://www.cnsre.cn/posts/221205544069/&lt;/a&gt;&lt;br /&gt;
ç›¸å…³è¯é¢˜ï¼š&lt;a href=&#34;https://www.cnsre.cn/tags/aws/&#34;&gt;https://www.cnsre.cn/tags/aws/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
</content:encoded>
        <dc:creator>CNSRE</dc:creator>
        <media:content url="http://localhost:1313/https://cn-north-1-image.s3.cn-north-1.amazonaws.com.cn/cnsre/logo/lambda.png" medium="image"><media:title type="html">featured image</media:title></media:content>
        
        
        
          
            
              <category>aws</category>
            
          
            
              <category>lambda</category>
            
          
            
              <category>cloudwatch</category>
            
          
        
        
          
            
              <category>aws</category>
            
          
            
              <category>lambda</category>
            
          
        
        
      </item>
      

    
  </channel>
</rss>